@model IEnumerable<VistasClinicaSanRafael.Models.Cita>

@{
    ViewData["Title"] = "Citas";
}

<div class="jumbotron text-center">
    <h1 class="display-4">¡Bienvenido a Citas!</h1>
    <p class="lead">Aquí podrás gestionar las citas</p>
</div>

<div class="appointments-container mt-5">
    <div class="card shadow-lg" style="border-radius: 10px;">
        <div class="card-header text-white text-center" style="background-color: #003366; font-size: 1.5rem; font-family: 'Merriweather', serif;">
            Gestión de Citas
        </div>
        <div class="card-body" style="font-family: 'Arial', sans-serif; color: #003366;">
            <!-- Formulario de filtrado -->
            <form asp-action="Index" method="GET" class="mb-4">
                <div class="row">
                    <div class="col-md-6">
                        <label for="startDate" class="form-label">Fecha Inicio</label>
                        <input type="date" id="startDate" name="startDate" class="form-control">
                    </div>
                    <div class="col-md-6">
                        <label for="endDate" class="form-label">Fecha Fin</label>
                        <input type="date" id="endDate" name="endDate" class="form-control">
                    </div>
                </div>
                <button type="submit" class="btn mt-3 w-100" style="background-color: #66b2ff; color: #FFFFFF;">Filtrar Citas</button>
            </form>

            <!-- Tabla de citas -->
            <table class="table table-striped">
                <thead style="background-color: #003366; color: #FFFFFF;">
                    <tr>
                        <th>Paciente</th>
                        <th>Contacto</th>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Tratamiento</th>
                        <th>Doctor</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var cita in Model)
                        {
                            <tr>
                                <td>@cita.Paciente?.Nombre @cita.Paciente?.Apellidos</td>
                                <td>@cita.Paciente?.Telefono</td>
                                <td>@cita.Fecha.ToString("yyyy-MM-dd")</td>
                                <td>@cita.Hora.ToString(@"hh\:mm")</td>
                                <td>@cita.Tratamiento?.Nombre</td>
                                <td>@cita.Empleado?.Nombre @cita.Empleado?.Apellidos</td>
                                <td>@cita.Estado</td>
                                <td>
                                    <a asp-controller="Citas" asp-action="Edit" asp-route-id="@cita.IdCita" class="btn btn-sm reprogram-btn">Reprogramar</a>
                                    <a asp-controller="Citas" asp-action="Delete" asp-route-id="@cita.IdCita" class="btn btn-sm cancel-btn">Cancelar</a>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="8" class="text-center">No se encontraron citas.</td>
                        </tr>
                    }
                </tbody>
            </table>

            <!-- Botón para agregar una nueva cita -->
            <a asp-controller="Citas" asp-action="Create" class="btn w-100 mt-3" style="background-color: #003366; color: #FFFFFF;">Agendar Nueva Cita</a>
        </div>
    </div>
</div>

<style>
    .appointments-container {
        margin-top: 20px;
        background-color: #F8F9FA;
        padding: 20px;
    }

    .card {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: 1px solid #E6E6E6;
    }

    .card-header {
        background-color: #003366;
        color: #FFFFFF;
        font-size: 1.5rem;
        font-family: 'Merriweather', serif;
    }

    .reprogram-btn,
    .cancel-btn {
        background-color: #66b2ff;
        color: #FFFFFF;
        border: none;
        transition: background-color 0.3s ease, transform 0.2s ease;
    }

        .reprogram-btn:hover,
        .cancel-btn:hover {
            background-color: #003366;
            transform: scale(1.05);
        }
</style>
